## Docker を起動する

goenbako という**コンテナを作成して起動する**

```
docker run goenbako
```

上記のようにすることでデーモンがレジストリからイメージを取得して、goenbako というコンテナを起動できる。

- コンテナは Docker は実行環境の箱
- イメージはコンテナに必要なものを記載した雛形。コンテナを作るための設計図のようなもの
- デーモン様は裏側で暗躍し続けているアプリケーションで、レジストリとのやり取りを行う
  - イメージを取得してコンテナを起動したりしてくれる。
- レジストリはイメージをオンライン上で保存しておくもの

## コマンド

- docker container run -d

  - ターミナルの裏側でコンテナを起動できる

- docker container logs コンテナ名

  - ログを表示することができる

- docker container exec コンテナ名　好きなコマンド

  - コンテナの実行環境におけるコマンドを実行する(例えば Rails のコンテナであれば rails s など)

- docker system prune -a
  - 使わないイメージやコンテナを全て消すことができる

## Dockerfile

- イメージを作るための指示を記述するもの
  - アプリコードやライブラリ、ベースイメージなど

ルートディレクトリに Dockerfile を配置

```
FROM ruby:2.7

WORKDIR /var/www

COPY . /src/var/www

CMD ["/bin/bash"]
```

- FROM でイメージのバージョンを指定
- WORKDIR は作業場所の指定
- src ディレクトリの中にソースコードをコピーして全て配置してくれる
- CMD で Docker の起動時に実行するコマンドを設定

### git reset --hard コミット番号
対象のコミットをした時点の状態になる
途中のコミットはすべて消えてしまうため注意
